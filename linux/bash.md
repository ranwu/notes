type: 这个命令用来查看命令是属于bash外部命令还是bash内建命令。

不加参数时，会显示是外部命令还是内部命令。

当加入 `-t` 参数时，type会以底下这些字眼显示出其他的意义：

```
file: 表示为外部指令;
alias: 表示该命令为别名的名称
builtin: 表示该指令为bash内建的指令功能
-p：如果后面接的name为外部指令时，才会显示完整文件名
-a: 会由PATH变量定义的路径中，将所有包含name的指令都列出来，包含alias
```

如果type 后面的指令名称没有找到，那么该名称是不会被显示出来的，type主要是找出可执行文件，而不是一般的文件。可以作为类似which指令的用途。

在shell内用脱字符 `\` 表示转义。

扩增变量内容：

``` 
PATH="$PATH":/home/bin
```
上面这句话也是给PATH变量添加路径的方式。

如果该变量需要在其他子程序执行：

```
export PATH
```

取消变量的设置：

```
unset name
```

一般情况下，父程序的自定义变量无法在子程序内使用的。

核心模块目录：
```
/lib/modules/
```

查看和某个命令或文件相关的目录：

```
locate name
```

要活用bash的变量，比如我想到达某个目录，但这个目录太复杂，那么我可以将这个目录放在一个变量中，然后我就可以在任何地方引用这个变量了。

```
work="/home/ranwuer/test"
cd $work
```

查看目前shell环境中的默认环境变量：

```
可用env 和export
```

env变量存储了很多有用的信息：

- 家目录
- SHELL
- HISTSIZE，历史记录大小
- MAIL，当我们使用mail这个指令收信时，系统会去读取mailbox

在bash下生成随机数：

```
echo $RANDOM
```

产生一个0～32767之间的随机数。

如果想产生一个0～9的随机数呢？

```
declare -i number=$RANDOM*10/32768; echo $number
```

首先用`declare`声明一个整形变量`number`，由于`$RANDOM`产生的是5位数字的随机数，那么当这个数字乘以10,就扩大了10倍，也就是6位数字了，当再除以32768时，取整的话，刚好是1位数字，也就是0-9。

`set`除了显示bash的环境变量外，还会显示其他变量。

基本上，在Linux预设的情况下，使用{大写的字母}来设定的变量一般为系统内定需要的变量。

给PS1变量设置内容，可以改变shell提示符的显示方式：

- \d: 日期格式
- \H: 完整的主机名
- \h: 主机名逗号之前的内容
- \t: 显示时间，24小时「H:M:S」
- \T: 显示时间，12小时
- \A: 显示时间，24小时[H:M]
- \@: 显示时间，12小时「am:pm」
- \u: 目前使用者帐号
- \v: bash的版本
- \w: 完整的工作目录
- \W: 利用basename函数取得工作目录名称，所以仅仅会列出最后一个目录名
- \#: 下达的第几个指令
- \$: 如果是root，则为#，其他则为$

`$` 钱字号本身也表示一个变量，想要知道shell的进程ID（PID）号，就用`echo $$`

`?` 问号是关于上一个命令的回传值。成功执行就会返回0.

在bash中，子程序会继承父程序的环境变量，子程序不会继承父程序的自定义变量。

查看系统支持的语系：

```
locale -a
```

事实上，如果其他的语系变量都未设定。如果在系统中设置LANG或LC_ALL时，则其他语系变量会被这两个变量替代。

查看系统默认支持的语系：

```
cat /etc/sysconfig/i18n
```

`read`用来读取来自键盘的输入。

```
read -p “提示符” -t 30 named
```

提示用户在30秒内输入内容到named。

设置变量类型：declare/typeset

declare语法：

```
declare [-aixr] variable

-a 定义为数组类型
-i 定义为整型
-x 将变量变成环境变量
-r 将变量设为只读，说明此变量不能被更改，不能被unset
```

在默认情况下，bash对变量有几个基本的定义：

1. 变量类型为字符串
2. bash环境中的数值运算，预设最多只能达到整型形态，所以1/3的结果为0。

取消环境变量：

```
declare +x sum
```


单独列出变量的类型：

```
declare -p sum
```

如果将变量设为只读后想取消只读，那么只有注销用户再登陆才行。

定义数组：

```
var[index]=content
```

输出一个数组的内容：

```
echo "${var[1]},${var[2]},${var[3]}"
```

`ulimit`主要是用来限制用户使用系统资源。

```
ulimit [-SHacdfltu] [配额]

-H：hard limit，严格限定，必定不会超过这个数
-S：soft limit，超过会警告
-a：列出所有的限制额度
-c：当某些程序放生错误时，系统可能会将该程序在内存中的信息写成档案。这种档案被称为核心档案
-f：此shell可以建立的最大档案容量，单位为Kbyte
-d：程序可使用的最大分段内存容量
-l：锁定内存容量
-t：可使用的最大CPU时间（秒）
-u：单一用户可以使用的最大程序数量

```

限制用户仅能建立10M以下容量的档案：

```
ulimit -f 10240

# 当尝试建立超过此容量的数据时报错
dd if=/dev/zero of=123 bs=1M count=20
File size limit exceeded
```

还原ulimit的设定最简单的方法就是注销再登陆。

打印出想要的内容：

```
echo ${path#/*:} # 删除/和：之间内容长度最短的那个
echo ${path##/*:} # 删除/和：之间内容长度最长的那个
```

上文删除的是从左往右删除，如果想从右往左删除呢？

```
echo ${path%:*bin} # 从右往左删除冒号：与bin之间的内容
```

如果只想保留第一条内容呢？

```
echo ${path%%:*bin}
```

替换内容：

```
echo ${path/bin/BIN} # 将一个bin替换为BIN
echo ${path//bin/BIN} # 将替换所有符合条件的内容
```

还有种替换方式：
```
username=${username:-root}
```

注意冒号，加上冒号后，不管变量有没有设置，都会被冒号后面的内容替换掉。

总结：

![各种替换方式总结](http://i.v2ex.co/4HdlMRdo.png)

查看变量是否有值，如果没有值便会打印出预先设置好的内容：
```
var=${str?无此变数}
```

若str存在时，则var的内容会与str相同

设置别名：

```
alias lm='ls -al | more'
```

查看有哪些别名：

```
alias
```

取消别名：
```
unalias
```

将历史记录写入 ～/.bash_history中：

```
history -w
```

执行上一个指令：

```
!!
```

执行以`!al` 开头的指令

执行第66条指令：`!66`

系统指令搜寻顺序：

```
1. 以相对/绝对路径执行指令
2. 由alias找到该指令来执行
3. 有bash内建的（builtin）指令来执行
4. 透过$PATH这个变量的顺序搜寻到的第一个指令来执行
```

编辑`/etc/motd`可以让其他登录者看到消息。

login shell: 取得bash时需要完整的登入流程的，就称为login shell，举例来说，你要由tty1～tty6登入，需要输入用户的帐号与密码，此时取得的bash就称为「login shell」了。

non-login shell: 取得bash接口的方法不需要重复登入的举动。

login shell启动时会读取的两个配置文件：

1. `/etc/profile`: 这是系统整体的设定，最好不要修改这个档案;
2. `~/.bash_profile`或`~/.bash_login`或`~/.profile`：属于使用者个人设定;

在`/etc/profile`设置内容，每个login shell 都会读取这个配置文件。

`/etc/profile`会调用的外部数据：

*/etc/inputrc*

`/etc/profile` 会主动地判断使用者有没有自定义输入的按键功能，如果没有的话，`/etc/profile`就会决定设定「INPUTRC=/etc/inputrc」这个变量。

*/etc/profile.d/\*.sh*

只要在`/etc/profile.d/`这个目录内且扩展名为`.sh`，另外，使用者能够具有r的权限，那么该档案就会被`/etc/profile`调用。如果你需要帮所有使用者设定一些共享的命令别名时，可以在这个目录底下自建扩展名为`.sh`的档案，并将所需的数据写入即可。

*/etc/sysconfig/i18n*

这个档案是由`/etc/profile.d/lang.sh`呼叫进来的，这是我们决定bash预设使用何种语系的重要配置文件。文件中最重要的就是`LANG`这个变量。

*~/.bash_profile(login shell 才会读)*

bash在读完了整体环境设定的`/etc/profile`并由此呼叫其他配置文件后，接下来则是会读取使用者的个人配置文件。以下是个人配置文件：

1. `~/.bash_profile`
2. `~/.bash_login`
3. `~/.profile`

其实 `bash` 的 `login shell` 设定只会读取上面三个文档的其中一个，而读取的顺序则是按照它来的。

如果`~/.bash_profile`存在，那么不管其他文件有没有存在，都不会被读取。

bash读取配置文件主要是透过指令「source」来读取的。同时也可以用小数点`.`来读取。

```
source ~/.bashrc
. ~/.bashrc
```

如果命令提示符号消失，那么这样做可以恢复：

复制/etc/skel/.bashrc 到你的家目录，再修订一下你所想要的内容，并用source去调用`~/.bashrc`

还有一些配置文件可能会影响到你的bash操作的：

*/etc/man.config*

这个文档规定了使用`man`的时候，`man page`的路径需要到哪里去找。

如果你是以tarball的方式来安装你的数据，那么你的`man page`可能会放置在`/usr/local/softpackage/man`里头，那个`softpackage`是你的套件名称，这个时候你就得以手动的方式将该路径加到`/etc/man.config`里头。

这个档案最重要的是`MANPATH`这个变量设定。

*~/.bash_history*

预设的情况下，我们的历史命令就记录在这里。

*~/.bash_logout*

这个档案则记录了「当我注销bash后，系统再帮我做完什么动作才离开」的意思。不过，你也可以将一些备份或者是其他你认为重要的工作写在这个档案中，那么当你离开Linux的时候，就可以解决一些烦人的事情了。