### 规范化
确立数据库的结构

确保数据库的可行性，可用性和可靠性。

范式用于帮助定义数据组织形式。

在开始规范化数据库之前，你必须定义要开发的应用程序的作用。

比如：我想创建一个用户可以发帖和其他用户可以回帖的留言板。用户需要注册，然后使用电子邮箱/密码的组合登陆以发布信息。

**提示：**

- 确定在数据库中存储什么信息的最好的方法是，仔细考虑一下将向数据库询问的问题，以及答案中会包含哪些数据。
- 存储的内容尽可能多余你可能需要的。
- 如果只关注细节，规范化会非常难以学习。

### 键
分为主键和外键。

主键是唯一的标识符，规则：

- 始终有一个值(不能为NULL)
- 具有一个保持不变的值(永不改变)
- 表中的每一条记录都有唯一的值

第二种是外键，外键是表A的主键在表B中的代表。

一个简单的论坛数据库：
![forum](../pic/forum.jpeg)

如果在表中找不到主键就创建一个。如果这个主键没有任何其他意义和目的，就称其为代理主键。

一般来说，使用表名的一部分(例如，message)和id这个此来命名主键。

MySQL只允许每个表有一个主键，虽然你可以让主键基于多列。

理想情况下，主键应该是整数，使MySQL的性能更佳。

### 关系
1. 一对一
2. 一对多
3. 多对多

数据的库的两个表也可能没有任何关系。

如果A表中有且仅有一条的记录对应表B的唯一一条记录，那这种关系称为一对一的关系。

如果表A中的一条记录对应表B中的多条记录，那这种关系称为一对多关系。

两个表之间的一个多对多关系最好使用中间表，表示成两个一对多关系。

应该避免多对多关系，因为它们会带来数据冗余和完整性问题。

**提示：**

数据库设计过程的结果就是ERD(实体-关系图)或ERM(实体-关系模型)。图像化的数据库表示方法使用图形来表示表和列。

下图是一个关系图：
![ralations](../pic/relations)

### 第一范式

定义：符合1NF的关系中的每个属性都不可再分。

要满足第一范式(1NF)，数据库中的每一个表必须具有一下两个性质：

- 每一列必须仅包含一个值(有时候这被描述为原子性或不可分隔性);
- 所有表都不能具有相关数据的重复列。

任何非原子性的列都应该被打散成多列。如果一个表有重复的相似列，就把这些列转化为只包含这些列的单独表。

另外一个问题是，一个表是否使用了一列存储多个电话号码(移动电话，家庭电话，工作电话)，或用一列存储一个人的兴趣爱好(烹饪，跳舞，滑雪等等)。

应该尽量避免NULL值出现在数据库中。

每个表都要有一个主键是第一范式中隐含的思想。

**提示:**

理解第一范式最简单的方法是，它就是横向分析表的规则：检查单独一行的所有列，确保唯一性并避免重复出现类似的数据。

### 第二范式

规则：

- 如果数据库要符合第二范式(2NF)，数据库首先必须符合第一范式(必须按顺序规范化)。
- 然后，表的每一个不为键(例如，外键)的列必须依赖主键。

当某一列在多行中具有相同的非键值时，通常可以确定它违反了这个规则。这些值应该存储在它们自己的表中，并且通过键关联回原来的表。

规范化其实可以理解为创建更多表的过程，直到所有潜在冗余都被消除为止。
